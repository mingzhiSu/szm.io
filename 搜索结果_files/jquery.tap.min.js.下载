$.fn.tap=function(e){var g=this,a="ontouchend" in document.createElement("div"),f=a?"touchstart":"mousedown",c=a?"touchmove":"mousemove",d=a?"touchend":"mouseup",b=a?"touchcancel":"mouseout";g.each(function(){var h={};h.target=this;$(h.target).on(f,function(j){var i="touches" in j?j.touches[0]:(a?window.event.touches[0]:window.event);h.startX=i.clientX;h.startY=i.clientY;h.endX=i.clientX;h.endY=i.clientY;h.startTime=+new Date});$(h.target).on(c,function(j){var i="touches" in j?j.touches[0]:(a?window.event.touches[0]:window.event);h.endX=i.clientX;h.endY=i.clientY});$(h.target).on(d,function(i){if((+new Date)-h.startTime<300){if(Math.abs(h.endX-h.startX)+Math.abs(h.endY-h.startY)<20){var i=i||window.event;i.preventDefault();e.call(h.target)}}h.startTime=undefined;h.startX=undefined;h.startY=undefined;h.endX=undefined;h.endY=undefined})});return g};